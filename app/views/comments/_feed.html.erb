<% if post.comments.any? %>
  <% post.comments.each do |comment| %>
    <% firstname = User.find(comment.user_id).firstname %>
    <% lastname = User.find(comment.user_id).lastname %>
    <% full_name = firstname + ' ' + lastname %>
    <div class="flex w-full mt-2.5">
      <%= link_to user_path(comment.user_id) do %>
        <img class="inline object-cover w-8 h-8 mr-2.5 border rounded-full" src="https://scontent-fco1-1.xx.fbcdn.net/v/t1.30497-1/cp0/c12.0.40.40a/p40x40/84241059_189132118950875_4138507100605120512_n.jpg?_nc_cat=1&ccb=2&_nc_sid=7206a8&_nc_ohc=02k-Raa85_sAX88_QOT&_nc_ht=scontent-fco1-1.xx&tp=27&oh=6ab026268e92ba2c2231e4af6fb4ebd4&oe=5FEEEF9E" alt="Profile image"/>
      <% end %>
      <div class="w-max px-3 py-2 rounded-2xl bg-gray-100">
        <%= link_to user_path(comment.user_id) do %>
          <div class="text-sm font-semibold">
            <%= full_name %>
          </div>
        <% end %>
        <div class="text-base">
          <%= comment.body %>
        </div>
      </div>
      <div class="dropdown self-center inline-block relative overflow-visible">
        <button class="hover:bg-gray-100 py-2 px-2 rounded-full">
          <svg class="inline w-6 h-6 text-secondarygray fill-current" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z" />
          </svg>
        </button>
        <div class="dropdown-menu hidden absolute -right-28 z-10 w-64 py-2 bg-white rounded-lg border shadow-xl">
          <!-- create an edit action in CommentsController -->
          <%# link_to edit_post_path(post), class: "block mx-2 px-2 py-2 rounded-md hover:bg-lgray" do %>
            <span class="block mx-2 px-2 py-2 rounded-md hover:bg-lgray">Edit</span>
          <%# end %>
          <%= link_to post_comment_path(comment, post), method: :delete, data: { confirm: "Are you sure you want to delete this comment?" }, class: "block mx-2 px-2 py-2 rounded-md hover:bg-lgray" do %>
            <span class="">Delete</span>
          <% end %>
        </div>
      </div>
    </div>
    <div class="text-xs ml-14 mt-1 font-medium text-secondarygray">
      <%= time_ago_in_words(comment.created_at) %>
    </div>
  <% end %>
<% end %>